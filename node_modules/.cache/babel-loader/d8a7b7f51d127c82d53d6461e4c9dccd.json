{"ast":null,"code":"import _regeneratorRuntime from\"/home/elpatron33/Documentos/solidyti/PAGINA/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/elpatron33/Documentos/solidyti/PAGINA/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/elpatron33/Documentos/solidyti/PAGINA/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/elpatron33/Documentos/solidyti/PAGINA/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/elpatron33/Documentos/solidyti/PAGINA/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/elpatron33/Documentos/solidyti/PAGINA/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/elpatron33/Documentos/solidyti/PAGINA/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import EscribirEnLaBlockchain from\"./contracts/EscribirEnLaBlockchain.json\";import getWeb3 from\"./getWeb3\";import\"./App.css\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={valorActual:\"\",nuevoValor:\"\",web3:null,accounts:null,contract:null};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var web3,accounts,networkId,deployedNetwork,instance,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getWeb3();case 3:web3=_context.sent;_context.next=6;return web3.eth.getAccounts();case 6:accounts=_context.sent;_context.next=9;return web3.eth.net.getId();case 9:networkId=_context.sent;deployedNetwork=EscribirEnLaBlockchain.networks[networkId];instance=new web3.eth.Contract(EscribirEnLaBlockchain.abi,deployedNetwork&&deployedNetwork.address);// Set web3, accounts, and contract to the state, and then proceed with an\n// example of interacting with the contract's methods.\n_this.setState({web3:web3,accounts:accounts,contract:instance});_context.next=15;return _this.state.contract.methods.Leer().call();case 15:response=_context.sent;_this.setState({valorActual:response});_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](0);// Catch any errors for any of the above operations.\nalert(\"Failed to load web3, accounts, or contract. Check console for details.\");console.error(_context.t0);case 23:case\"end\":return _context.stop();}}},_callee,null,[[0,19]]);}));_this.storeValue=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var _this$state,accounts,contract,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_this$state=_this.state,accounts=_this$state.accounts,contract=_this$state.contract;_context2.prev=2;_context2.next=5;return contract.methods.Escribir(_this.state.nuevoValor).send({from:accounts[0]});case 5:_context2.next=7;return _this.state.contract.methods.Leer().call();case 7:response=_context2.sent;_this.setState({valorActual:response});_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);// Catch any errors for any of the above operations.\nalert(_context2.t0);console.error(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[2,11]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleChangevalue=function(event){_this.setState({nuevoValor:event.target.value});};return _this;}_createClass(App,[{key:\"render\",value:function render(){if(!this.state.web3){return React.createElement(\"div\",null,\"Cargando Web3, cuentas, y contratos..\");}return React.createElement(\"div\",{className:\"App\"},React.createElement(\"div\",{class:\"app\"},React.createElement(\"h3\",null,\"EscribirEnLaBlockchain \"),React.createElement(\"label\",{class:\"renglon\"},\"El valor en la Blockchain es:  \",React.createElement(\"b\",{class:\"valorEnBlockchain\"},this.state.valorActual),\" \"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"form\",{onSubmit:this.storeValue},React.createElement(\"label\",{class:\"nuevoValor\"},\"Escribe el nuevo valor que deseas asignar\"),React.createElement(\"br\",null),React.createElement(\"input\",{class:\"input-text\",type:\"text\",value:this.state.nuevoValor,onChange:this.handleChangevalue}),React.createElement(\"br\",null),React.createElement(\"input\",{class:\"input\",type:\"submit\",value:\"Almacenar nuevo valor\"}))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/elpatron33/Documentos/solidyti/PAGINA/src/App.js"],"names":["React","Component","EscribirEnLaBlockchain","getWeb3","App","state","valorActual","nuevoValor","web3","accounts","contract","componentDidMount","eth","getAccounts","net","getId","networkId","deployedNetwork","networks","instance","Contract","abi","address","setState","methods","Leer","call","response","alert","console","error","storeValue","event","preventDefault","Escribir","send","from","handleChangevalue","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport EscribirEnLaBlockchain from \"./contracts/EscribirEnLaBlockchain.json\";\nimport getWeb3 from \"./getWeb3\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  state = { \n    valorActual: \"\",\n    nuevoValor: \"\",\n    web3: null, \n    accounts: null, \n    contract: null \n  };\n\n  componentDidMount = async () => {\n    try {\n      // Get network provider and web3 instance.\n      const web3 = await getWeb3();\n\n      // Use web3 to get the user's accounts.\n      const accounts = await web3.eth.getAccounts();\n\n      // Get the contract instance.\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = EscribirEnLaBlockchain.networks[networkId];\n      const instance = new web3.eth.Contract(\n        EscribirEnLaBlockchain.abi,\n        deployedNetwork && deployedNetwork.address,\n      );\n\n      // Set web3, accounts, and contract to the state, and then proceed with an\n      // example of interacting with the contract's methods.\n      this.setState({ web3, accounts, contract: instance });\n\n      const response = await this.state.contract.methods.Leer().call();\n      this.setState({\n        valorActual :response\n      })\n\n     \n\n    } catch (error) {\n      // Catch any errors for any of the above operations.\n      alert(\n        `Failed to load web3, accounts, or contract. Check console for details.`,\n      );\n      console.error(error);\n    }\n  };\n\n  storeValue = async (event) => {\n    event.preventDefault();\n\n    const { accounts, contract } = this.state;\n\n    try{\n          // Stores a new value in blockchain\n        await contract.methods.Escribir(this.state.nuevoValor).send({ from: accounts[0] });\n\n        const response = await this.state.contract.methods.Leer().call();\n        \n        this.setState({\n          valorActual :response\n          })\n    }\n    catch (error) {\n      // Catch any errors for any of the above operations.\n      alert(\n        error\n      );\n      console.error(error);\n    }\n\n    \n  };\n\n  handleChangevalue = (event) => {\n    this.setState ({\n      nuevoValor  : event.target.value\n    })\n  }\n\n  render() {\n   if (!this.state.web3) {\n      return <div>Cargando Web3, cuentas, y contratos..</div>;\n    }\n    return (\n    <div  className=\"App\">\n      \n      <div class=\"app\" >\n\n      <h3>EscribirEnLaBlockchain </h3>\n\n       <label class=\"renglon\">El valor en la Blockchain es:  <b class=\"valorEnBlockchain\" >{this.state.valorActual}</b> </label>\n       <br/>\n       <br/>\n\n       <form onSubmit={this.storeValue}>\n       <label  class=\"nuevoValor\" >Escribe el nuevo valor que deseas asignar</label>\n       <br/>\n       \n       <input class=\"input-text\" type=\"text\" value={this.state.nuevoValor} onChange={this.handleChangevalue}></input>\n       <br/>\n       <input class=\"input\" type=\"submit\" value=\"Almacenar nuevo valor\"></input>\n       </form>\n      </div>\n\n</div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}